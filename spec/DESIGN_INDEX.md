# 🗂️ Структура документов дизайна: Условные выражения

```
📋 DESIGN PHASE - Условные выражения и булевские операторы
│
├─ 📖 НАЧНИТЕ С ЭТОГО ────────────────────────────────────
│  └─ DESIGN_INSTRUCTIONS.md
│     ├─ Что это такое? (подкрепление)
│     ├─ Архитектура на одно_не
│     ├─ Порядок реализации (6 шагов)
│     ├─ Специальная осторожность (5 пунктов)
│     ├─ Чек-лист перед отправкой
│     └─ Полезные ссылки
│
├─ 📚 ПОЛНАЯ ДОКУМЕНТАЦИЯ ────────────────────────────────
│
│  1. 📋 DESIGN_SUMMARY.md
│     ├─ Структура документов (все 6 документов)
│     ├─ Ключевые проектные решения
│     ├─ Приоритеты операторов (9 уровней)
│     ├─ Типизация (таблица)
│     ├─ Грамматика (Lark правила)
│     ├─ Short-circuit evaluation
│     ├─ Обработка ошибок
│     ├─ План реализации (4 этапа + время)
│     ├─ Контрольный список
│     ├─ Примеры для валидации (5 примеров)
│     └─ Ожидаемые результаты
│
│  2. 🎯 DESIGN_CONDITIONALS.md
│     ├─ 1️⃣ Требования (3 пункта)
│     ├─ 2️⃣ Приоритеты (9 уровней)
│     ├─ 3️⃣ Грамматика (Lark)
│     ├─ 4️⃣ Архитектура интерпретатора
│     │  ├─ Типы значений
│     │  ├─ Узлы дерева
│     │  ├─ Методы интерпретатора (5 новых)
│     │  └─ Семантика булевских значений
│     ├─ 5️⃣ Примеры синтаксиса
│     ├─ 6️⃣ Ошибки и обработка
│     ├─ 7️⃣ План реализации (4 фазы)
│     ├─ 8️⃣ Цепочки сравнений (дизайн решение)
│     ├─ 9️⃣ Ошибки и обработка
│     └─ 🔟 Примеры тестов
│
│  3. 🏗️ IMPLEMENTATION_PLAN.md (СМОТРЕТЬ ПРИ КОДИНГЕ!)
│     ├─ 1. grammar.lark (обновленная версия)
│     ├─ 2. interpreter.py (архитектура)
│     │  ├─ 2.1 Новое исключение BooleanContextError
│     │  ├─ 2.2 Пять новых методов (с полным кодом!)
│     │  │  ├─ _eval_conditional_expr()
│     │  │  ├─ _eval_or_expr()
│     │  │  ├─ _eval_and_expr()
│     │  │  ├─ _eval_not_expr()
│     │  │  └─ _eval_comparison()
│     │  ├─ 2.3 Обновить _eval()
│     │  ├─ 2.4 Обновить арифметические методы
│     │  └─ 2.5 Обновить _eval_assignment()
│     ├─ 3. Токены в grammar.lark
│     ├─ Таблица трансформации синтаксиса
│     ├─ Диаграмма парсинга примера
│     └─ Проверочный лист для реализации
│
│  4. 📊 OPERATOR_PRECEDENCE.md
│     ├─ 1. Визуальное представление иерархии (диаграмма 9 уровней)
│     ├─ 2. Примеры парсинга (5 примеров с разбором)
│     ├─ 3. Правила вывода типов (таблица)
│     ├─ 4. Ошибки типизации (таблица)
│     └─ Примечание о булевских типах
│
│  5. 💡 SYNTAX_EXAMPLES.md (ПРИМЕРЫ СИНТАКСИСА!)
│     ├─ 1. Основные условные выражения (3 примера)
│     ├─ 2. Операторы сравнения (3 примера)
│     ├─ 3. Логические операторы (6 примеров)
│     ├─ 4. Комбинированные выражения (2 примера)
│     ├─ 5. Ошибки и граничные случаи (4 примера)
│     ├─ 6. Практические примеры (5 примеров)
│     │  ├─ Расчет налога
│     │  ├─ Квадратный корень с проверкой
│     │  ├─ Факториал
│     │  ├─ Алгоритм Евклида
│     │  └─ Скидка по количеству
│     └─ Таблица тестовых выражений (20 примеров)
│
│  6. 🧪 TEST_SCENARIOS.md (57 ГОТОВЫХ ТЕСТОВ!)
│     ├─ Структура тестирования (файлы)
│     ├─ 1. Базовые условные выражения (9 тестов + код)
│     ├─ 2. Операторы сравнения (11 тестов + код)
│     ├─ 3. Логические операторы (15 тестов + код)
│     ├─ 4. Ошибки типизации (8 тестов + код)
│     ├─ 5. Комплексные сценарии (8 тестов + код)
│     ├─ 6. Граничные случаи (6 тестов + код)
│     ├─ Таблица покрытия тестами (57 тестов)
│     └─ Ожидаемые результаты
│
└─ 🔗 СВЯЗНЫЕ ФАЙЛЫ ─────────────────────────────────────────
   ├─ grammar.lark (требует обновления)
   ├─ interpreter.py (требует обновления)
   ├─ tests/test_interpreter.py (требует обновления)
   └─ README.md (требует обновления)
```

---

## 📖 Рекомендуемый порядок чтения

### Для менеджера/тестировщика:
1. **DESIGN_SUMMARY.md** — обзор проекта (15 минут)
2. **SYNTAX_EXAMPLES.md** — примеры использования (20 минут)
3. **TEST_SCENARIOS.md** — параметры тестирования (15 минут)

### Для кодера (реализация):
1. **DESIGN_INSTRUCTIONS.md** — инструкции (10 минут)
2. **DESIGN_CONDITIONALS.md** — полная спецификация (30 минут)
3. **IMPLEMENTATION_PLAN.md** — кодинг (30 минут)
4. **OPERATOR_PRECEDENCE.md** — при отладке парсера (20 минут)
5. **TEST_SCENARIOS.md** — при написании тестов (40 минут)

### Для архитектора:
1. **DESIGN_CONDITIONALS.md** — требования (30 минут)
2. **IMPLEMENTATION_PLAN.md** — архитектура (20 минут)
3. **DESIGN_SUMMARY.md** — проверка решений (10 минут)

---

## 🎯 Быстрая справка

### Три новые конструкции

```clc
# 1. Условные выражения
result = 10 if condition else 20

# 2. Операторы сравнения
a = 100 if x < y else 0

# 3. Логические операторы
b = 100 if x < y and y < z else 0
```

### Ограничения

```clc
x = (1 < 2)           # ❌ Нельзя присваивать boolean
y = (1 < 2) + 5       # ❌ Нельзя использовать в арифметике
z = 10 if (1 < 2) else 5  # ✅ Только в условиях!
```

### Приоритеты операторов (низший к высшему)

```
if-else > or > and > not > == != < <= > >= > + - > * / mod > ** > унарный
```

---

## 📋 Быстрый чек-лист

- [ ] Прочитал DESIGN_INSTRUCTIONS.md
- [ ] Прочитал DESIGN_CONDITIONALS.md или DESIGN_SUMMARY.md
- [ ] Прочитал IMPLEMENTATION_PLAN.md
- [ ] Понял приоритеты из OPERATOR_PRECEDENCE.md
- [ ] Видел примеры из SYNTAX_EXAMPLES.md
- [ ] Готов писать 57 тестов из TEST_SCENARIOS.md
- [ ] Готов начать реализацию

---

## 🚀 Готово!

Все документы подготовлены для максимально эффективной реализации.

**Начните с DESIGN_INSTRUCTIONS.md → затем IMPLEMENTATION_PLAN.md.**

Good luck! 🎉

---

## 📊 Статистика документов

| Документ | Стр. кода | Примеры | Тесты | Время читать |
|----------|-----------|--------|-------|------------|
| DESIGN_INSTRUCTIONS.md | 200 | 5 | - | 15 мин |
| DESIGN_SUMMARY.md | 250 | 5 | - | 20 мин |
| DESIGN_CONDITIONALS.md | 350 | 15 | 10 | 30 мин |
| IMPLEMENTATION_PLAN.md | 400 | 10 | - | 30 мин |
| OPERATOR_PRECEDENCE.md | 200 | 15 | - | 15 мин |
| SYNTAX_EXAMPLES.md | 400 | 50+ | - | 30 мин |
| TEST_SCENARIOS.md | 500 | - | 57 | 40 мин |
| **ИТОГО** | **2300** | **100+** | **57** | **3 часа** |

---

**Версия:** 1.0
**Дата:** 2026-02-14
**Статус:** ✅ Готово к реализации
